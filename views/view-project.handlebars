<div id="editorContainer">
		<div class="ui-layout-center">
			<div id="code-editor" class="d-flex flex-column">
				{{#unless isThumbnail}}
				<div id="topBar">
					<label class="btn btn-primary mb-0">
						Upload File<input type="file" accept=".java,.py,.cpp,.dat,.txt,.html,.css,.js" hidden>
					</label>
					<button id="newFileBtn" class="btn btn-primary">New File</button>
					<a id="downloadFileBtn" class="btn btn-primary disabled" href="#">Download File</a>
					<a id="downloadAllFiles" class="btn btn-primary" href="downloadAll">Download Project as .ZIP</a>
				</div>
				{{/unless}}

				<ul class="nav nav-tabs" id="fileTabs">

				</ul>

				<div class="row">
					<div class="col-sm" id="editor"></div>
					<div class="col-sm" id="previewContainer" style="display: none;">
						<iframe id="htmlPreview" {{#if isThumbnail}}sandbox="allow-forms allow-pointer-lock allow-same-origin allow-scripts"{{/if}}></iframe>
						<a id="htmlPreviewNewWindow" target="_blank" class="btn btn-primary"><i class="fas fa-external-link-alt"></i></a>
					</div>
				</div>
			</div>
		</div>

		<div class="ui-layout-south">
			 <!-- <textarea id="output" readonly autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
			<form id="programInputForm">
				<input disabled id="programInput" type="text" autocomplete="off">
			</form> -->
			<div id="terminal">

			</div>
			<div id="buttons">
				<button class="btn btn-primary" id="run">Run</button>
				<img id="loadingWheel" src="/projects/images/spinner.gif" style="display: none;">
			</div>
		</div>

		{{#unless isThumbnail}}
		<div class="ui-layout-east">
			<div id="videoChat" class="video-chat-view hide mt-5">
				<button type="button" name="switch-views" id="toggle-chat" class="btn btn-primary" data-toggle="tooltip" data-placement="bottom" title="Toggle Group Chat" style="position: absolute; top: 5px; right: 5px;"><i class="fas fa-comments"></i></button>
				<div id="peerButtonContainer">
					<h5 id="callStatus"></h5>
					<div id="peerButtons"></div>
				</div>
				<video autoplay="autoplay" id="selfVideo" class="easyrtcMirror" muted="muted" style="display: none;"></video>
				<div id="peerVideos">
				</div>

				<div id="connectButtons">
					<div class="btn-group btn-group-toggle w-100 px-2" data-toggle="buttons">
					  <label class="btn btn-outline-info w-50" id="joinCallAudio" style="overflow: hidden;">
					    <input type="radio" name="options" id="option1" autocomplete="off" checked>Join Call With Audio
					  </label>
					  <label class="btn btn-outline-info btn-block w-50" id="joinCallVideo" style="overflow: hidden;">
					    <input type="radio" name="options" id="option2" autocomplete="off">Join Call With Video
					  </label>
					</div>

					<!-- <button id="joinCallAudio" class="btn btn-success">Join Call With Audio</button>
					<button id="joinCallVideo" class="btn btn-success">Join Call With Video</button> -->
				</div>

				<div id="callButtons" style="display: none;">
					<button id="muteAudio" class="btn btn-danger"><i class="fas fa-microphone"></i></button>
					<button id="hangUp" class="btn btn-danger"><i class="fas fa-phone-slash"></i></button>
					<button id="toggleVideo" class="btn btn-danger"><i class="fas fa-video"></i></button>
				</div>
			</div>

			<div id="chat" class="container video-chat-view mt-5">
				<button type="button" name="switch-views" id="toggle-video" class="btn btn-primary" data-toggle="tooltip" data-placement="bottom" title="Toggle Video" style="position: absolute; top: 5px; right: 5px;"><i class="fas fa-headset"></i></button>

				<div class="card">
					<div class="card-header">
						Group Chat
					</div>

					<div class="card-body">
						<div id="group-chat">
							<ul id="all-messages" class="p-0">
								{{#each project.chatHistory}}
									<li class="bg-light rounded my-3 py-2 mx-2 pl-2">
										<h6 class="text-secondary"><b>{{author}}</b></h6>
										<p style="margin: 0;">{{message}}</p>
									</li>
								{{/each}}
							</ul>
							<script type="text/javascript">
								var objDiv = document.getElementById("all-messages");
								objDiv.scrollTop = objDiv.scrollHeight;
							</script>

							<form id="send-message-form">
								<div class="input-group">
									<input id="msg" autocomplete="off" type="text" class="form-control" placeholder="Group Message" aria-label="Group Message" aria-describedby="button-addon2">
									<div class="input-group-append">
										<button class="btn btn-outline-primary" type="submit">Send</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

		</div>
		{{/unless}}
</div>

<!-- <div id="editorContainer" class="container-fluid">

</div> -->

<!-- Settings Section -->
<!-- <i id="close-settings" class="far fa-times-circle"></i> -->
{{#unless isThumbnail}}
<div id="settings" {{#if isNew}}{{else}}{{#if popup}}{{else}} style="display: none;" {{/if}}{{/if}}>
	<div id="box" class="mx-auto p-5" style="max-width: 1100px;">
		{{#unless ismentor}}
		<div id="sharing" class="mb-5">

			<h1 class="title mb-4" style="font-weight: 200;">Invite Members to<input id="change-project-name" type="text" class="form-control" value="{{project.name}}" style="
				    display: inline;
				    vertical-align: baseline;
				    font-weight: 400;
						width: auto;
						font-size: inherit;
						border: none;
						/* width: 250px; */
			" required>
			</h1>

			<hr>
			<div class="container">
				{{#if isowner}}
				<form id="invite-mentor">
					<div class="form-group">
						<div class="row">
							<div class="col-sm-10 offset-sm-1">
								{{#if project.assignedMentor}}
								<div class="alert alert-success" role="alert">
								  Mentor <strong><a href="/users/profile/{{project.assignedMentor.id}}" target="_blank">@{{project.assignedMentor.username}}</a></strong> has accepted your invitation.
									<br>
									Feel free to contact them through the <a href="#chat" id="display-chat"><strong>integrated chat</strong></a>, <a href="mailto:{{project.assignedMentor.email}}" target="_blank"><strong>email</strong></a>, or <a href="/mentor/post" target="_blank"><strong>a mentor post.</strong></a>
								</div>
								{{else}}
								<div class="alert alert-success alert-dismissible fade show invite-mentor" role="alert" {{#if project.assignedMentor}} {{else if project.invitationPending}} {{else}}hidden {{/if}}>
									<strong><i class="fas fa-paper-plane"></i> Invitations Sent!</strong> Our mentors have been notified and will get back to you shortly!
									<button type="button" class="close" data-dismiss="alert" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								{{/if}}
								<label for="exampleInputEmail1"><span style="font-weight: bold;">Mentors</span> <span class="badge badge-primary align-top"><i class="fas fa-crown text-warning"></i> Premium Feature</span></label>
								<div class="input-group mb-3 input-group-lg">
								  <div class="input-group-prepend">
								    <div class="input-group-text">
								      <input type="checkbox" aria-label="Checkbox for following text input" style="height: 25px; width: 25px;" required {{#if project.assignedMentor}}checked {{else if project.invitationPending}}checked {{/if}}>
								    </div>
								  </div>
								  <input type="text" class="form-control {{#if project.assignedMentor}}is-valid {{else if project.invitationPending}} is-valid {{/if}}" aria-label="Text input with checkbox" readonly value="Collaborate on this project with a qualified mentor">
								</div>
							</div>

						</div>

						<div class="row">
							<div class="col-sm-7 offset-sm-4">
								<button class="btn btn-secondary ml-auto {{#if project.assignedMentor}} d-block {{else if project.invitationPending}}d-block{{else}}{{/if}}" type="submit" name="button" {{#if project.assignedMentor}} {{else if project.invitationPending}} {{else}}hidden {{/if}}>Cancel Invitation</button>

								<button class="btn btn-success ml-auto {{#if project.assignedMentor}} {{else if project.invitationPending}} {{else}}d-block {{/if}}" type="submit" name="button" {{#if project.assignedMentor}}hidden {{else if project.invitationPending}}hidden {{/if}}><i class="fas fa-people-carry"></i> Invite a Mentor</button>
							</div>
						</div>
					</div>
				</form>

				{{else}}
				<div class="row">
					<div class="col-sm-10 offset-sm-1">
						<label for="exampleInputEmail1"><span style="font-weight: bold;">Mentors</span> <span class="badge badge-primary align-top"><i class="fas fa-crown text-warning"></i> Premium Feature</span></label>
						<div class="alert alert-info mb-4" role="alert">
						  Only owners can invite mentors for collaboration
						</div>
					</div>
				</div>
				{{/if}}

				<form id="share-project" novalidate>
					<div class="form-group">
						<div class="row">
							<div class="col-sm-10 offset-sm-1">
								<label for="exampleInputEmail1" style="font-weight: bold;">Email address</label>
							</div>
						</div>

						<div class="row mb-2">
							<div class="col-sm-10 offset-sm-1">
								<input id="exampleInputEmail1" type="email" class="form-control" name="emailInput" aria-describedby="emailHelp" placeholder="Enter email" required>
								<div class="text-danger invalid-feedback">
				          Member with this email could not be found
				        </div>
							</div>
						</div>

						<div id="send-options" class="row">
							<div class="col-sm-3 offset-sm-1">
								<div id="add-more-emails"><i class="fas fa-plus-circle"></i> Add More</div>
							</div>

							<div class="col-sm-7">
								<button class="btn btn-success ml-auto" type="submit" name="button" style="display: block !important;"><i class="fas fa-paper-plane"></i> Send Invitations</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		{{/unless}}

			<!-- <div id="members"> -->
			<h1 style="font-weight: 200;" id="members">Members with Access</h1>
			<hr>
			<div class="container">
				<table class="mx-auto table" style="overflow-y: scroll; width: 82%;">
					<!-- <thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Handle</th>
						</tr>
					</thead> -->
					<tbody>
						{{#if isowner}}
							<tr class="bg-light">
								<td>{{owner.username}}</td>
								<td>
									<p class="text-right">Owner</p>
								</td>
								<td class="text-right">
									<div class="dropdown">
										<button type="button" class="btn btn-primary dropdown-toggle" id="transfer-ownership-button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Transfer Ownership</button>
										{{#if project.usersWithAccess}}
										  <div class="dropdown-menu" aria-labelledby="transfer-ownership-button">
													{{#each project.usersWithAccess}}
											    	<a class="transfer-ownership dropdown-item" href="#" id="{{this.id}}" data-toggle="modal" data-target="#transfer-ownership-modal">{{this.username}}</a>
													{{/each}}
										  </div>
										{{/if}}
									</div>
								</td>
							</tr>
						{{else}}
							<tr>
								<td>{{owner.username}}</td>
								<td>
									<p class="text-right">Owner</p>
								</td>
								{{#unless ismentor}}
								<td></td>
								{{/unless}}
							</tr>
						{{/if}}

						{{#if ismentor}}
							{{#each users}}
							<tr>
								<td>{{this.username}}</td>
								<td></td>
							</tr>
							{{/each}}
						{{else}}
							{{#each users}}
							<tr>
								<td style="width: 33.33%">{{this.username}}</td>
								<td style="width: 33.33%">
									<select class="custom-select" id="inlineFormCustomSelect">
										<option selected>Choose...</option>
										<option value="1">One</option>
										<option value="2">Two</option>
										<option value="3">Three</option>
									</select>
								</td>
								<td class="text-right" style="width: 33.33%">
									<button class="btn btn-danger" type="button" name="button">Delete User</button>

								</td>
							</tr>
							{{/each}}
						{{/if}}

						<!-- <tr>
							<td>Jacob</td>
							<td>Thornton</td>
							<td>@fat</td>
						</tr>
						<tr>
							<td colspan="2">Larry the Bird</td>
							<td>@twitter</td>
						</tr> -->
					</tbody>
				</table>
			</div>
			<br>
			<br>

			{{#unless ismentor}}
			<!-- DANGER ZONE -->
			<h1 style="font-weight: 200;">Danger Zone</h1>
			<hr>

			<div class="container">
				<div class="row">
					<div class="col-sm-8 offset-sm-1">
						<h4><b>Delete this Project</b></h4>
						<p>This action will permanently delete this project</p>
					</div>

					<div class="col-sm-2">
						<button type="button" name="button" class="btn btn-danger" data-toggle="modal" data-target="#delete-project-modal">Delete Project</button>
					</div>
				</div>
			</div>
			{{/unless}}

		<!-- </div> -->
	</div>
</div>

<!-- Modal -->
<div class="modal fade" id="delete-project-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<form id="delete-project-confirm">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel"><b>Do you really want to delete the project?</b></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<div class="alert alert-warning" role="alert">
				  	This action <b>cannot</b> be undone
					</div>

					<p>This action will permanently remove the <b>{{project.name}}</b> project from all systems</p>
					<p>You will <b>not</b> be able to restore the project</p>
					<label for="#confirm-project-name">Please type the name of the project to confirm</label>
					<input id="confirm-project-name" type="text" name="projectName" autocomplete="off" class="form-control" required>
					<div class="text-danger invalid-feedback">
						Invalid project name.
					</div>

				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-danger btn-block">I undestand the consequences, Delete the project</button>
				</div>
			</div>
		</form>
	</div>
</div>
{{/unless}}

<!-- Modal -->
<div class="modal fade" id="transfer-ownership-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<form id="delete-project-confirm">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel"><b>Transfer Ownership</b></h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<p>This action will transfer the ownership to <strong><span class="recipient"></span>.</strong></p>
					<p class="text-muted">You will no longer be an owner of this project.</p>
				</div>
				<div class="modal-footer">
					<button type="submit" class="btn btn-danger btn-block" id="confirm-transfer">Confirm</button>
				</div>
			</div>
		</form>
	</div>
</div>
